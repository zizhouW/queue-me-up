(this["webpackJsonpqueue-me-up"]=this["webpackJsonpqueue-me-up"]||[]).push([[0],{105:function(e,a,t){},106:function(e,a,t){},111:function(e,a,t){},113:function(e,a,t){},114:function(e,a,t){"use strict";t.r(a);var n=t(0),u=t.n(n),r=t(8),o=t.n(r),i=t(55),s=t(34),c=t(74),l=function(e){return function(a,t,n){return e((function(e,t){var n,u=performance.now(),r=a(e,t),o=performance.now(),i=(n=o-u,Math.round(100*n)/100);return console.log("reducer process time:",i),r}),t,n)}},m=function(e){return function(a){return function(t){console.group(t.type),console.info("dispatching",t);var n=a(t);return console.log("next state",e.getState()),console.groupEnd(),n}}},d=t(7),p="LOADING",h="SUCCESS",v="ERROR",f="QUEUE_DATA_".concat(p),E="QUEUE_DATA_".concat(h),g="QUEUE_DATA_".concat(v),Q="JOIN_QUEUE_".concat(p),b="JOIN_QUEUE_".concat(h),y="JOIN_QUEUE_".concat(v),j="LEAVE_QUEUE_".concat(p),q="LEAVE_QUEUE_".concat(h),N="LEAVE_QUEUE_".concat(v);function O(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function U(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?O(Object(t),!0).forEach((function(a){Object(d.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var C={queueData:{},isQueueDataLoading:!1,queueDataError:null},L={joinQueueResponse:{},isJoinQueueLoading:!1,joinQueueError:null},_={leaveQueueResponse:{},isLeaveQueueLoading:!1,leaveQueueError:null},D=Object(s.c)({getQueueReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case f:return U({},e,{isQueueDataLoading:a.payload,queueDataError:null});case E:return U({},e,{isQueueDataLoading:!1,queueData:a.payload});case g:return U({},e,{isQueueDataLoading:!1,queueDataError:a.payload});default:return e}},joinQueueReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case Q:return U({},e,{isJoinQueueLoading:a.payload,joinQueueError:null});case b:return U({},e,{isJoinQueueLoading:!1,joinQueueResponse:a.payload});case y:return U({},e,{isJoinQueueLoading:!1,joinQueueError:a.payload});default:return e}},leaveQueueReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case j:return U({},e,{isLeaveQueueLoading:a.payload,leaveQueueError:null});case q:return U({},e,{isLeaveQueueLoading:!1,leaveQueueResponse:a.payload});case N:return U({},e,{isLeaveQueueLoading:!1,leaveQueueError:a.payload});default:return e}}});t(105);var w=t(49),T=t(37),R=(t(106),t(17)),S=t(13),k=t(20),J=t(21),A=t(15),I=t(22),x=t(153),P=t(154),M=t(146),F=t(151),B=t(148),V=t(79),W=t(14),z=t(149),H=t(62),Y=t.n(H);t(107);Y.a.initializeApp({apiKey:"AIzaSyCeFjz8D74S_eUe6g6DFCEB9MFOB73MJWg",authDomain:"queue-me-up.firebaseapp.com",databaseURL:"https://queue-me-up.firebaseio.com",projectId:"queue-me-up",storageBucket:"queue-me-up.appspot.com",messagingSenderId:"59079782968",appId:"1:59079782968:web:71f8308203e4045d5e6ccd",measurementId:"G-ZTY8H01CCW"});var G=Y.a,K=(t(111),function(e){function a(e){var t;return Object(R.a)(this,a),(t=Object(k.a)(this,Object(J.a)(a).call(this,e))).state={queueName:"",startTime:new Date,maxTimespan:5,actionUserNumber:1,error:""},t.handleCreateQueue=t.handleCreateQueue.bind(Object(A.a)(t)),t.handleQueueNameChange=t.handleQueueNameChange.bind(Object(A.a)(t)),t.handleStartTimeChange=t.handleStartTimeChange.bind(Object(A.a)(t)),t.handleMaxTimespanChange=t.handleMaxTimespanChange.bind(Object(A.a)(t)),t.handleActionUserNumberChange=t.handleActionUserNumberChange.bind(Object(A.a)(t)),t}return Object(I.a)(a,e),Object(S.a)(a,[{key:"handleCreateQueue",value:function(){var e=this,a=this.state,t=a.queueName,n=a.startTime,u=a.maxTimespan,r=a.actionUserNumber,o=a.error;n<=new Date?this.setState({error:"Start time can not be in the past"}):(this.setState({error:null}),o||G.firestore().collection("queues").add({name:t,users:[],startTime:n,maxTimespan:u,actionUserNumber:r}).then((function(a){G.firestore().collection("queues").doc(a.id).onSnapshot((function(a){a.exists&&e.props.history.push("/queue/".concat(a.id))}))})))}},{key:"handleQueueNameChange",value:function(e){e&&e.target&&this.setState({queueName:e.target.value})}},{key:"handleStartTimeChange",value:function(e){this.setState({error:"",startTime:e})}},{key:"handleMaxTimespanChange",value:function(e){e&&e.target&&this.setState({maxTimespan:e.target.value})}},{key:"handleActionUserNumberChange",value:function(e){e&&e.target&&this.setState({actionUserNumber:e.target.value})}},{key:"render",value:function(){return u.a.createElement("div",{className:"create-queue-container"},u.a.createElement("h1",null,"Create Queue"),this.state.error&&u.a.createElement("div",{className:"form-error"},this.state.error),u.a.createElement(x.a,null,u.a.createElement(P.a,{htmlFor:"input-name"},"Queue Name"),u.a.createElement(M.a,{id:"input-name",value:this.state.queueName,onChange:this.handleQueueNameChange}),u.a.createElement(W.a,{utils:V.a},u.a.createElement(z.a,{label:"Start Time",value:this.state.startTime,onChange:this.handleStartTimeChange,disablePast:!0,format:"yyyy-MM-dd  HH:mm"})),u.a.createElement(F.a,{label:"Timespan per queue (minutes)",type:"number",InputLabelProps:{shrink:!0},margin:"normal",value:this.state.maxTimespan,onChange:this.handleMaxTimespanChange}),u.a.createElement(F.a,{label:"# of people in action",type:"number",InputLabelProps:{shrink:!0},margin:"normal",value:this.state.actionUserNumber,onChange:this.handleActionUserNumberChange}),u.a.createElement(B.a,{variant:"contained",color:"primary",onClick:this.handleCreateQueue},"Submit")))}}]),a}(n.Component)),Z=Object(T.f)(K),$=function(e){function a(){var e,t;Object(R.a)(this,a);for(var n=arguments.length,u=new Array(n),r=0;r<n;r++)u[r]=arguments[r];return(t=Object(k.a)(this,(e=Object(J.a)(a)).call.apply(e,[this].concat(u)))).handleRedirectCreateQueue=function(){t.props.history.push("/create")},t}return Object(I.a)(a,e),Object(S.a)(a,[{key:"render",value:function(){return u.a.createElement("div",null,u.a.createElement("h1",null,"Queue me up"),u.a.createElement(B.a,{variant:"contained",color:"primary",onClick:this.handleRedirectCreateQueue},"Create Queue"))}}]),a}(n.Component),X=Object(T.f)($),ee=function(e){return{type:f,payload:e}},ae=function(e){return{type:Q,payload:e}},te=function(e){return{type:b,payload:e}},ne=function(e){return{type:j,payload:e}},ue=function(e){return function(a){if(e){var t=!0;a(ee(t)),G.firestore().collection("queues").doc(e).onSnapshot((function(e){if(e.exists){var n=0;a(ee(t=!1)),a((u=Object.assign(e.data(),{startTime:new Date(1e3*e.data().startTime.seconds),users:e.data().users.map((function(e){return{order:++n,name:e}}))}),{type:E,payload:u}))}var u}),(function(e){a(ee(t=!1)),a({type:g,payload:e})}))}}},re=function(e,a){return function(t){if(a){var n=!0;t(ae(n)),G.firestore().collection("queues").doc(e).update({users:G.firestore.FieldValue.arrayUnion(a)}).then((function(e){t(ae(n=!1)),t(e?{type:y,payload:"Something went wrong."}:te({currentUser:a}))}))}}},oe=function(e,a){return function(t){if(a){var n=!0;t(ne(n)),G.firestore().collection("queues").doc(e).update({users:G.firestore.FieldValue.arrayRemove(a)}).then((function(e){t(ne(n=!1)),e?t(function(e){return{type:N,payload:e}}("Something went wrong.")):(t(te({currentUser:null})),t({type:q,payload:{message:"Leaved successfully."}}))}))}}},ie=(t(113),function(e){function a(e){var t;return Object(R.a)(this,a),(t=Object(k.a)(this,Object(J.a)(a).call(this,e))).state={userName:""},t.handleJoinQueue=t.handleJoinQueue.bind(Object(A.a)(t)),t.handleLeaveQueue=t.handleLeaveQueue.bind(Object(A.a)(t)),t.handleUsernameChange=t.handleUsernameChange.bind(Object(A.a)(t)),t}return Object(I.a)(a,e),Object(S.a)(a,[{key:"componentWillUnmount",value:function(){this.props.joinQueueResponse.currentUser&&this.props.onLeaveQueue(this.props.joinQueueResponse.currentUser)}},{key:"handleJoinQueue",value:function(){this.state.userName&&this.props.onJoinQueue(this.state.userName)}},{key:"handleLeaveQueue",value:function(){this.setState({userName:""}),this.props.joinQueueResponse.currentUser&&this.props.onLeaveQueue(this.props.joinQueueResponse.currentUser)}},{key:"handleUsernameChange",value:function(e){e&&e.target&&this.setState({userName:e.target.value})}},{key:"render",value:function(){var e=this.props,a=e.queueData,t=e.isLoading,n=e.queueDataError,r=e.joinQueueResponse,o=e.isJoinQueueLoading,i=(e.joinQueueError,e.isLeaveQueueLoading),s=(e.leaveQueueError,new Date);if(t)return u.a.createElement("span",null,"Loading...");if(n)return u.a.createElement("span",null,n);var c=[],l=[];a.users&&a.users.length>0&&(l=(c=c.concat(a.users)).splice(a.actionUserNumber));var m=null,d=null;return a.startTime&&new Date(a.startTime)>s?m=u.a.createElement("span",{className:"queue-subtitle queue-subtitle--not-live"},"You cannot joing this queue yet because it has not been started, please come back after ",u.a.createElement("strong",null,a.startTime.toString()),"."):a.startTime&&(m=u.a.createElement("span",{className:"queue-subtitle"},"This queue is now live, enter your name below and join the queue before others!"),d=u.a.createElement("div",{className:"queue-main-content"},u.a.createElement("div",{className:"action-list-users"},u.a.createElement("div",{className:"action-list-users__title"},"Users in action (limit ",a.actionUserNumber,")"),c.length>0?c.map((function(e){return u.a.createElement("div",{className:"action-list-user",key:e.name},u.a.createElement("div",{className:"action-list-user__name"},e.name))})):u.a.createElement("span",{className:"action-list-users-placeholder"},"Nobody is in queue. Join now to be the first!")),l.length>0&&u.a.createElement("div",{className:"queue-list-users"},u.a.createElement("div",{className:"queue-list-users__title"},"Up next"),l.map((function(e){return u.a.createElement("div",{className:"queue-list-user",key:e.name},u.a.createElement("div",{className:"queue-list-user__order"},e.order),u.a.createElement("div",{className:"queue-list-user__name"},e.name))}))),r.currentUser&&u.a.createElement("div",{className:"queue-joined-as"},"You are in queue as:",u.a.createElement("span",{className:"queue-joined-as__name"}," ",r.currentUser)),u.a.createElement("div",{className:"queue-action-form"},r.currentUser?u.a.createElement(B.a,{variant:"contained",color:"secondary",className:"queue-action-form__button",onClick:this.handleLeaveQueue,disabled:i},"Leave Queue"):u.a.createElement(x.a,null,u.a.createElement(P.a,{htmlFor:"input-name"},"Enter name"),u.a.createElement(M.a,{id:"input-name",className:"queue-action__username-input",value:this.state.userName,onChange:this.handleUsernameChange}),u.a.createElement(B.a,{variant:"contained",color:"primary",className:"queue-action-form__button",onClick:this.handleJoinQueue,disabled:a.startTime&&new Date(a.startTime)>s||o},"Join Queue"))))),u.a.createElement("div",{className:"queue-container"},u.a.createElement("div",{className:"queue-name"},a.name),m,d)}}]),a}(n.Component));ie.defaultProps={queueDataError:"",joinQueueError:"",leaveQueueError:""};var se=Object(T.f)(Object(i.b)((function(e){return{queueData:e.getQueueReducer.queueData,isLoading:e.getQueueReducer.isQueueDataLoading,queueDataError:e.getQueueReducer.queueDataError,joinQueueResponse:e.joinQueueReducer.joinQueueResponse,isJoinQueueLoading:e.joinQueueReducer.isJoinQueueLoading,joinQueueError:e.joinQueueReducer.joinQueueError,leaveQueueResponse:e.leaveQueueReducer.leaveQueueResponse,isLeaveQueueLoading:e.leaveQueueReducer.isLeaveQueueLoading,leaveQueueError:e.leaveQueueReducer.leaveQueueError}}),(function(e,a){return{getQueueData:e(ue(a.match.params.queueId)),onJoinQueue:function(t){e(re(a.match.params.queueId,t))},onLeaveQueue:function(t){e(oe(a.match.params.queueId,t))}}}))(ie));var ce=function(){return u.a.createElement("div",{className:"App"},u.a.createElement(w.a,null,u.a.createElement(T.c,null,u.a.createElement(T.a,{path:"/create"},u.a.createElement(Z,null)),u.a.createElement(T.a,{path:"/queue/:queueId"},u.a.createElement(se,null)),u.a.createElement(T.a,{path:"/"},u.a.createElement(X,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var le=function(e){var a=[m,c.a],t=[s.a.apply(void 0,a),l],n=s.d.apply(void 0,t);return Object(s.e)(D,e,n)}();o.a.render(u.a.createElement(i.a,{store:le},u.a.createElement(ce,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},96:function(e,a,t){e.exports=t(114)}},[[96,1,2]]]);
//# sourceMappingURL=main.89069736.chunk.js.map